"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[31420],{141802:(e,t,i)=>{i.r(t),i.d(t,{QuoteCache:()=>n,QUOTE_FIELDS:()=>o,QUOTE_FIELDS_CACHE:()=>s});var r=i(588537);class n{constructor(e){this._cache=new Map,this._fields=[...e.fields]}update(e,t,i){const n=(0,r.ensureDefined)(e.symbolname);if(this._cache.has(n)||this._cache.set(n,{symbolname:n,status:e.status,values:{}}),"error"===e.status)return;const o=(0,r.ensureDefined)(this._cache.get(n));o.status=e.status;for(const r of this._fields){if(!t.has(r))continue;const n=e.values[r];(i||void 0!==n)&&(o.values[r]=n)}}get(e){var t;return null!==(t=this._cache.get(e))&&void 0!==t?t:null}fields(){return this._fields}}const o=new Set(["pro_name","base_name","logoid","currency-logoid","base-currency-logoid","short_name","description","exchange","listed_exchange","type","country_code","provider_id","sector","typespecs","industry","currency_id","last_price","fractional","minmov","minmove2","pricescale","change","change_percent","volume","average_volume","market_cap_basic","total_revenue","earnings_per_share_basic_ttm","price_earnings_ttm","beta_1_year","dps_common_stock_prim_issue_fy","dividends_yield","earnings_release_next_date","earnings_per_share_forecast_next_fq","earnings_release_date","earnings_per_share_fq","fundamental_currency_code","symbol-primaryname","currency_code","rates_mc","rates_fy","rates_ttm","value_unit_id","update_mode","language","local_description","short_description","source","source2","format"]),s=new n({fields:o})},124418:(e,t,i)=>{i.r(t),i.d(t,{getQuoteSessionInstance:()=>s,setQuoteSessionInstance:()=>a,getQuoteSessionNoEnsure:()=>_,destroyQuoteSessions:()=>l});var r=i(167904),n=i.n(r);const o={};function s(e="full"){return o[e]||a(e,new(n())(e)),o[e]}function a(e="full",t){o[e]=t}function _(e="full"){return o[e]}function l(){for(const e in o)if(o.hasOwnProperty(e)){const t=o[e];void 0!==t&&t.destroy(),delete o[e]}}},574764:(e,t,i)=>{i.d(t,{QuoteSession:()=>n});var r=i(95935);class n{constructor(e,t=(0,r.randomHash)()){this._sessionstarted=!1,this._globalHandler=null,this._chartApi=e,this._sessionid="qs_"+t}destroy(){this._sessionstarted&&(this._chartApi.quoteDeleteSession(this._sessionid),this._sessionstarted=!1)}connected(){return this._chartApi.connected()}connect(e){this._globalHandler=e,this._chartApi.createSession(this._sessionid,this),this._chartApi.connect()}disconnect(){this._chartApi.disconnect()}quoteAddSymbols(e){this._chartApi.quoteAddSymbols(this._sessionid,e)}quoteRemoveSymbols(e){this._chartApi.quoteRemoveSymbols(this._sessionid,e)}quoteFastSymbols(e){this._chartApi.quoteFastSymbols(this._sessionid,e)}quoteSetFields(e){this._chartApi.quoteSetFields(this._sessionid,e)}onMessage(e){var t;switch(e.method){case"connected":this._sessionstarted||(this._chartApi.quoteCreateSession(this._sessionid),this._sessionstarted=!0);break;case"disconnected":this._sessionstarted=!1}null===(t=this._globalHandler)||void 0===t||t.call(this,e)}quoteHibernateAll(){this._chartApi.quoteHibernateAll(this._sessionid)}}
window.TradingView.QuoteSession=n},167904:(e,t,i)=>{e=i.nmd(e);var r=i(97639),n=i(343370).default,o=i(12481).default,s=i(796347).PriceFormatter;const{uniq:a}=i(977809);var _=i(95935);const{normalizeUpdateMode:l}=i(461909);var c=i(198796).deepExtend;const{QUOTE_FIELDS_CACHE:u,QUOTE_FIELDS:d}=i(141802);var h;function S(e,t){this.options=Object.assign({throttleTimeout:125},t),this._connected=!1,this._symbol_data={},this._subscriptions={},this.onConnect=new r,this.onDisconnect=new r,this._quoteApi=new h(window.ChartApiInstance),this._type=e||"full",this._delayUpdateFastSymbols=o(this._updateFastSymbols,250),this._throttledSymbolData={},this._formatterValuesCache={},this._waitingForFormatters={},this._snapshotValuesCache={},this._waitingForSnapshot={},this.connect()}h=i(574764).QuoteSession,S.prototype.destroy=function(){this._quoteApi.destroy(),this._quoteApi=null,this._connected=!1,this.onDisconnect.fire()},S.prototype.typeFields={},S.prototype.typeFields.simple=["base-currency-logoid","ch","chp","currency-logoid","currency_code","currency_id","base_currency_id","current_session","description","exchange","format","fractional","is_tradable","language","local_description","listed_exchange","logoid","lp","lp_time","minmov","minmove2","original_name","pricescale","pro_name","short_name","type","typespecs","update_mode","volume","value_unit_id"],S.prototype.typeFields.simpleDetailed=[].concat(S.prototype.typeFields.simple,["ask","bid","fundamentals","high_price","is_tradable","low_price","open_price","prev_close_price","rch","rchp","rtc","rtc_time","status","basic_eps_net_income","beta_1_year","earnings_per_share_basic_ttm","industry","market_cap_basic","price_earnings_ttm","sector","volume","dividends_yield","timezone"]),S.prototype.typeFields.full=[],S.prototype.typeFields.watchlist=[].concat(S.prototype.typeFields.simple,["rchp","rtc","country_code","provider_id"]),S.prototype.typeFields.portfolio=["pro_name","short_name","exchange","listed_exchange","description","sector","type","typespecs","industry","currency_code","currency_id","ch","chp","logoid","currency-logoid","base-currency-logoid","earnings_per_share_forecast_next_fq","earnings_release_next_date","earnings_release_date","earnings_per_share_fq","lp","fractional","minmov","minmove2","pricescale","volume","average_volume","market_cap_basic","total_revenue","earnings_per_share_basic_ttm","price_earnings_ttm","beta_1_year","dps_common_stock_prim_issue_fy","dividends_yield","fundamental_currency_code","rates_mc","rates_fy","rates_ttm","format"],S.prototype.typeFields.notes=["short_name","pro_name","logoid","currency-logoid","base-currency-logoid","symbol-primaryname","type","typespecs"],S.prototype.connect=function(e){this._quoteApi.connect(this.quoteHandler.bind(this))},S.prototype.quoteHandler=function(e){var t=e.method,i=e.params;switch(t){case"connected":this._connected||(this._connected=!0,this.onConnected());break;case"quote_list_fields":break;case"quote_symbol_data":this._connected&&this.onSymbolData(i[0]);break;case"quote_completed":
this._connected&&this.onSymbolData({symbolname:i[0],complete:performance.now(),values:{}});break;case"disconnected":this._connected&&(this._connected=!1,this.onDisconnect.fire())}},S.prototype.onConnected=function(){this.setFields();var e=Object.keys(this._symbol_data);e.length&&(this._quoteApi.quoteAddSymbols(e),this._delayUpdateFastSymbols()),this.onConnect.fire()},S.prototype.setFields=function(){var e=S.prototype.typeFields[this._type];e&&e.length&&this._quoteApi.quoteSetFields(e)},S.prototype.onSymbolData=function(e){try{e.status&&u.update(e,d,!1)}catch(e){}var t=e.symbolname,i=this._throttledSymbolData[t];i||(i=this._throttledSymbolData[t]={fnDispatch:n(this.dipatchSymbolData.bind(this),this.options.throttleTimeout)}),i.cache?c(i.cache,e):i.cache=e,i.fnDispatch(t)},S.prototype._parseUpdateMode=function(e){l(e)},S.prototype.dipatchSymbolData=function(e){var t=this._symbol_data[e],i=this._throttledSymbolData[e].cache;if(delete this._throttledSymbolData[e].cache,this._symbol_data[e])for(var r in c(t,i),t.values&&this._parseUpdateMode(t.values),this._subscriptions){var n=this._subscriptions[r];n.has(e)&&n.get(e).forEach((function(e){e(t,i)}))}},S.prototype.subscribe=function(e,t,i){this._subscriptions[e]=this._subscriptions[e]||new Map;var r=this._subscriptions[e];t=[].concat(t);var n=[];t.forEach((function(e){this._symbol_data[e]?r&&r.has(e)||this._symbol_data[e].subscribers_count++:(this._symbol_data[e]={subscribers_count:1},n.push(e)),r.has(e)||r.set(e,[]),r.get(e).push(i),r.get(e).fast=!0,this._symbol_data[e]&&this._symbol_data[e].values&&i(this._symbol_data[e],this._symbol_data[e])}),this),n.length&&this._connected&&(this._quoteApi.quoteAddSymbols(n),this._delayUpdateFastSymbols())},S.prototype.unsubscribe=function(e,t,i){t=[].concat(t);for(var r=this._subscriptions[e],n=[],o=0;o<t.length;o++){var s=t[o];if(r)if(r.has(s)&&i){var a=r.get(s).indexOf(i);~a&&r.get(s).splice(a,1),r.get(s).length||r.delete(s)}else r.delete(s);r&&0===r.size&&delete this._subscriptions[e],this._symbol_data.hasOwnProperty(s)&&(r&&!r.has(s)&&this._symbol_data[s].subscribers_count--,this._symbol_data[s].subscribers_count||(delete this._symbol_data[s],n.push(s)))}n.length&&this._connected&&(this._quoteApi.quoteRemoveSymbols(n),this._delayUpdateFastSymbols())},S.prototype.setFastSymbols=function(e,t){if(this._subscriptions[e])for(var i=this._subscriptions[e],r=Array.from(i.keys()),n=0;n<r.length;++n){var o=r[n];i.get(o).fast=-1!==t.indexOf(o)}this._delayUpdateFastSymbols()},S.prototype._updateFastSymbols=function(){if(this._connected){var e=this._fastSymbols();0===e.length?this._quoteApi.quoteHibernateAll():this._quoteApi.quoteFastSymbols(e)}},S.prototype._delayUpdateFastSymbols=S.prototype._updateFastSymbols,S.prototype._fastSymbols=function(){var e=[];for(var t in this._subscriptions)for(var i=this._subscriptions[t],r=Array.from(i.keys()),n=0;n<r.length;++n){var o=r[n];i.get(o).fast&&e.push(o)}return e=a(e)},S.prototype.formatter=function(e,t){var i=this;if(this._waitingForFormatters[e])return this._waitingForFormatters[e];function r(e){
var i=t&&!e.fractional?1:e.minmov;return new s(e.pricescale,i,e.fractional,e.minmove2)}var n=new Promise((function(t,n){if(i._formatterValuesCache[e])t(r(i._formatterValuesCache[e]));else{var o=_.guid();i.subscribe(o,[e],(function(s){"error"===s.status&&(i._waitingForFormatters[e]=null,n("Quotes snapshot is not received")),function(e){return e&&null!=e.pricescale&&null!=e.minmov}(s.values)&&(i._waitingForFormatters[e]=null,i._formatterValuesCache[e]=s.values,t(r(s.values)),i.unsubscribe(o,e))}))}}));return this._waitingForFormatters[e]=n,n},S.prototype.snapshot=function(e){var t=this;if(this._waitingForSnapshot[e])return this._waitingForSnapshot[e];var i=new Promise((function(i,r){if(t._snapshotValuesCache[e])i(t._snapshotValuesCache[e]);else{var n=_.guid();t.subscribe(n,[e],(function(o){"error"===o.status&&(t._waitingForSnapshot[e]=null,r("Quotes snapshot is not received"));var s=o.values;s&&s.minmov&&s.pricescale&&s.description&&(t._waitingForSnapshot[e]=null,t._snapshotValuesCache[e]=s,i(s),t.unsubscribe(n,e))}))}}));return this._waitingForSnapshot[e]=i,i},TradingView.QuoteSessionMultiplexer=S,e&&e.exports&&(e.exports=S)},796347:(e,t,i)=>{i.d(t,{PriceFormatter:()=>S,formatterOptions:()=>l,numberToStringWithLeadingZero:()=>h});var r=i(575932),n=i(960521),o=i(270617);var s=i(143498);const a=(0,i(911905).getLogger)("Chart.PriceFormatter"),_=new RegExp(/^(-?)[0-9]+$/),l={decimalSign:".",decimalSignFractional:"'"},c=new Map;const u=new Map;function d(e,t,i,r){let n=0;if(e>0&&t>0){let t=e;for(i&&r&&(t/=r);t>1;)t/=10,n++}return n}function h(e,t){if(!(0,o.isNumber)(e))return"n/a";if(!(0,o.isInteger)(t))throw new TypeError("invalid length");if(t<0||t>24)throw new TypeError("invalid length");if(0===t)return e.toString();return("0000000000000000"+e.toString()).slice(-t)}class S{constructor(e,t,i,s,_){if(this.type="price",this._formatterErrors={custom:(0,r.t)("Price format is invalid."),fraction:(0,r.t)("Fraction part is invalid."),secondFraction:(0,r.t)("Second fraction part is invalid.")},t||(t=1),(0,o.isNumber)(e)&&(0,o.isInteger)(e)||(e=100),e<0)throw new TypeError("invalid base");this._priceScale=e,this._minMove=t,this._minMove2=s,this._variableMinTickData=i||void 0===_?void 0:function(e,t){var i,r,s,a,_;const l=t.split(" ").map(Number);if((0,o.isEven)(l.length)||l.some(Number.isNaN))return[{minTick:e,price:1/0,maxIndex:1/0}];const c=[];for(let e=0;e<l.length;e+=2){const t=null!==(i=l[e+1])&&void 0!==i?i:1/0,o=null!==(s=null===(r=c[c.length-1])||void 0===r?void 0:r.price)&&void 0!==s?s:0,u=null!==(_=null===(a=c[c.length-1])||void 0===a?void 0:a.maxIndex)&&void 0!==_?_:0,d=t===1/0?1/0:new n.Big(t).minus(o).div(l[e]).plus(u).toNumber();c.push({minTick:l[e],price:t,maxIndex:d})}return c}(NaN,_),i&&void 0!==s&&s>0&&2!==s&&4!==s&&8!==s?a.logDebug("invalid minmove2"):(this._fractional=i,this._fractionalLength=d(this._priceScale,this._minMove,this._fractional,this._minMove2))}isFractional(){return!!this._fractional}state(){return{fractional:this._fractional,fractionalLength:this._fractionalLength,minMove:this._minMove,
minMove2:this._minMove2,priceScale:this._priceScale}}format(e,t,i,r=!0,o=!0,a=!1){let _="";e<0?(_=!1===r?"":"−",e=-e):e&&!0===t&&(_="+");let l,c=this._priceScale,u=this._minMove,h=this._fractionalLength;if(void 0!==this._variableMinTickData){const t=function(e){const{minTick:t,price:i,variableMinTickData:r,shouldCheckForEquality:n}=e;return void 0===r?t:function(e,t,i=!1){for(let r=0;r<t.length;r++){if(e<t[r].price)return t[r].minTick;if(i&&e===t[r].price)return t[r].minTick}return t[t.length-1].minTick}(i,r,n)}({price:e,minTick:NaN,variableMinTickData:this._variableMinTickData,shouldCheckForEquality:!0});c=Math.pow(10,function(e){return(new n.Big(e).toFixed().split(".")[1]||"").length}(t)),u=(0,n.Big)(t).mul(c).toNumber(),h=d(c,u)}return l=this._fractional?_+this._formatAsFractional(e,i):_+this._formatAsDecimal({price:e,priceScale:c,minMove:u,fractionalLength:h,tailSize:i,cutFractionalByPrecision:a}),o?(0,s.forceLTRStr)(l):l}parse(e){return"+"===(e=(e=(0,s.stripLTRMarks)(e)).replace("−","-"))[0]&&(e=e.substring(1)),this._fractional?this._minMove2?this._parseAsDoubleFractional(e):this._parseAsSingleFractional(e):this._parseAsDecimal(e)}hasForexAdditionalPrecision(){return!this._fractional&&10===this._minMove2}static serialize(e){return e.state()}static deserialize(e){return new S(e.priceScale,e.minMove,e.fractional,e.minMove2)}_formatAsExponential(e){const t=Math.floor(.75*Math.log10(this._priceScale)),i=e*Math.pow(10,t),r=`e-${t}`,n=Math.log10(this._priceScale)-t;return`${i.toFixed(n).replace(".",l.decimalSign)}${r}`}_formatAsDecimal(e){const{price:t,priceScale:i,minMove:r,fractionalLength:o=0,tailSize:s=0,cutFractionalByPrecision:a}=e;if(i>1e10)return this._formatAsExponential(t);let _;_=this._fractional?Math.pow(10,o):Math.pow(10,s)*i/(a?1:r);const c=1/_;let u;if(_>1)u=Math.floor(t);else{const e=Math.floor(Math.round(t/c)*c);u=0===Math.round((t-e)/c)?e:e+c}let d="";if(_>1){let e=a?new n.Big(t).mul(_).round(void 0,0).minus(new n.Big(u).mul(_)).toNumber():parseFloat((Math.round(t*_)-u*_).toFixed(o));e>=_&&(e-=_,u+=1);const i=a?new n.Big(e).round(o,0).toNumber():parseFloat(e.toFixed(o))*r;d=l.decimalSign+h(i,o+s),d=this._removeEndingZeros(d,s)}return u.toString()+d}_getFractPart(e,t,i){const r=[0,5],n=[0,2,5,7],o=[0,1,2,3,5,6,7,8];return 2===i?void 0===r[e]?-1:r[e]:4===i?void 0===n[e]?-1:n[e]:8===i&&2===t?void 0===o[e]?-1:o[e]:e}_formatAsFractional(e,t){const i=this._priceScale/this._minMove;let r=Math.floor(e),n=t?Math.floor(e*i)-r*i:Math.round(e*i)-r*i;n===i&&(n=0,r+=1);let o="";if(t){let s=(e-r-n/i)*i;s=Math.round(s*Math.pow(10,t)),o=h(s,t),o=this._removeEndingZeros(o,t)}if(!this._fractionalLength)throw new Error("_fractionalLength is not calculated");let s="";if(this._minMove2){const e=n%this._minMove2;n=(n-e)/this._minMove2;const t=h(n,this._fractionalLength),i=this._getFractPart(e,2,this._minMove2);s=t+l.decimalSignFractional+i}else n=this._getFractPart(n,1,this._priceScale),s=h(n*this._minMove,this._fractionalLength);return r.toString()+l.decimalSignFractional+s+o}_removeEndingZeros(e,t){
for(let i=0;i<t&&"0"===e[e.length-1];i++)e=e.substring(0,e.length-1);return e}_parseAsDecimal(e){if(e.includes("e")){if(function(e){let t=c.get(e);return t||(t=new RegExp("^(-?)[0-9]+\\"+e+"[0-9]*e(-?)[0-9]+$"),c.set(e,t)),t}(l.decimalSign).exec(e)){const t=parseFloat(e.replace(l.decimalSign,"."));return{value:t,res:!0,suggest:this.format(t)}}return{error:this._formatterErrors.custom,res:!1}}let t=_.exec(e);if(t){const t=parseFloat(e);return{value:t,res:!0,suggest:this.format(t)}}if(t=function(e){let t=u.get(e);return t||(t=new RegExp("^(-?)[0-9]+\\"+l.decimalSign+"[0-9]*$"),u.set(e,t)),t}(l.decimalSign).exec(e),t){const t=parseFloat(e.replace(l.decimalSign,"."));return{value:t,res:!0,suggest:this.format(t)}}return{error:this._formatterErrors.custom,res:!1}}_patchFractPart(e,t,i){const r={0:0,5:1},n={0:0,2:1,5:2,7:3},o={0:0,1:1,2:2,3:3,5:4,6:5,7:6,8:7};return 2===i?void 0===r[e]?-1:r[e]:4===i?void 0===n[e]?-1:n[e]:8===i&&2===t?void 0===o[e]?-1:o[e]:e}_parseAsSingleFractional(e){let t=_.exec(e);if(t){const t=parseFloat(e);return{value:t,res:!0,suggest:this.format(t)}}if(t=new RegExp("^(-?)([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)$").exec(e),t){const e=!!t[1],i=parseInt(t[2]),r=this._priceScale,n=this._patchFractPart(parseInt(t[3]),1,r);if(n>=r||n<0)return{error:this._formatterErrors.fraction,res:!1};let o=i+n/r;return e&&(o=-o),{value:o,res:!0,suggest:this.format(o)}}return{error:this._formatterErrors.custom,res:!1}}_parseAsDoubleFractional(e){let t=_.exec(e);if(t){const t=parseFloat(e);return{value:t,res:!0,suggest:this.format(t)}}if(t=new RegExp("^(-?)([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)$").exec(e),t){const e=!!t[1],i=parseInt(t[2]),r=void 0!==this._minMove2?this._minMove2:NaN,n=this._priceScale/r,o=this._minMove2,s=this._patchFractPart(parseInt(t[3]),1,n),a=this._patchFractPart(parseInt(t[4]),2,o);if(s>=n||s<0)return{error:this._formatterErrors.fraction,res:!1};if(void 0!==o&&a>=o||a<0)return{error:this._formatterErrors.secondFraction,res:!1};let _=void 0!==o?i+s/n+a/(n*o):NaN;return e&&(_=-_),{value:_,res:!0,suggest:this.format(_)}}return{error:this._formatterErrors.custom,res:!1}}}},888035:(e,t,i)=>{var r;i.d(t,{BillingCycle:()=>r}),function(e){e.Monthly="m",e.ThreeMonths="3m",e.OneYear="y",e.TwoYears="2y"}(r||(r={}))},809965:(e,t,i)=>{var r,n,o;i.d(t,{ProPlans:()=>r,BrokerPlansIds:()=>o}),function(e){e.Free="free",e.Pro="pro",e.ProTrial="pro_trial",e.ProRealtime="pro_realtime",e.ProRealtimeTrial="pro_realtime_trial",e.ProPremium="pro_premium",e.ProPremiumTrial="pro_premium_trial",e.ProMiniAlerts="pro_mini_alerts",e.ProMiniAds="pro_mini_ads",e.ProMiniLayouts="pro_mini_layouts",e.ProEdu="pro_edu"}(r||(r={})),function(e){e.Platinum="platinum",e.Gold="gold",e.Silver="silver",e.Free="free"}(n||(n={})),function(e){e[e.Platinum=3]="Platinum",e[e.Gold=2]="Gold",e[e.Silver=1]="Silver",e[e.Free=0]="Free"}(o||(o={}))},234405:(e,t,i)=>{i.r(t),i.d(t,{TRIAL_SUFFIX:()=>s,EA_SUFFIX:()=>a,CUSTOM_SUFFIX:()=>_,billingCycleToTimeUnit:()=>l,getReadableCycle:()=>c,
getReadableNumericCycle:()=>u,billingPeriodText:()=>d,isEarlyAccess:()=>h,isTrialProduct:()=>S,getProductForTrial:()=>m,getDiscountFromEarlyAccess:()=>p,toEarlyAccess:()=>T,humanizeProPlan:()=>E,humanizeCardPlan:()=>A,getAmountOfDaysForBillingCycle:()=>g,countDiscountByBillingCycle:()=>f,billingCycleToMonth:()=>R,round2:()=>I,round0:()=>b,floor0:()=>y,round2or0:()=>O,round1or0:()=>L,roundMinimal:()=>C,getPlanName:()=>v});i(897116);var r=i(575932),n=i(809965),o=i(888035);const s="_trial",a="_discount",_="_custom";function l(e){return{y:(0,r.t)("year",{plural:"years",count:1}),m:(0,r.t)("month",{plural:"months",count:1}),"3m":(0,r.t)("three months"),"2y":(0,r.t)("two years")}[e]}function c(e){return{m:(0,r.t)("monthly"),y:(0,r.t)("annually"),"3m":(0,r.t)("3 months"),"2y":(0,r.t)("2-year")}[e]||""}function u(e){return{[o.BillingCycle.Monthly]:(0,r.t)("monthly"),[o.BillingCycle.OneYear]:(0,r.t)("1 year"),[o.BillingCycle.ThreeMonths]:(0,r.t)("3 months"),[o.BillingCycle.TwoYears]:(0,r.t)("2 years")}[e]||""}function d(e){var t;return null!==(t={y:(0,r.t)("Billed every year."),m:(0,r.t)("Billed every month."),"2y":(0,r.t)("Billed every two years.")}[e])&&void 0!==t?t:""}function h(e){return/\d{0,2}_discount$/.test(e)}function S(e){return new RegExp(s+"$").test(e)}function m(e){return e.split(s)[0]}function p(e){const t=e.match(new RegExp("^(d{0,2})"+a+"$"));return t?+t[1]||50:0}function T(e,t){return`${e}_${t}${a}`}function E(e,t){let i=e;switch(e){case n.ProPlans.Free:i="Basic";break;case n.ProPlans.Pro:i="Pro";break;case n.ProPlans.ProRealtime:i="Pro+";break;case n.ProPlans.ProPremium:i="Premium";break;case n.ProPlans.ProMiniAds:case n.ProPlans.ProMiniLayouts:case n.ProPlans.ProMiniAlerts:i=(0,r.t)("1-feature");break;case n.ProPlans.ProEdu:i=(0,r.t)("Rookie")}return t&&(i+=" "+(0,r.t)("trial")),i}function A(e){let t=e;switch(e){case n.ProPlans.Pro:t="Pro";break;case n.ProPlans.ProRealtime:t="Pro+";break;case n.ProPlans.ProPremium:t="Premium";break;case n.ProPlans.Free:t="Basic"}return t}function g(e){switch(e){case o.BillingCycle.TwoYears:return 730;case o.BillingCycle.OneYear:return 365;case o.BillingCycle.ThreeMonths:return 90;case o.BillingCycle.Monthly:return 30;default:return 1}}function f(e,t,i){return Math.round((t-e)*R(i))}function R(e){switch(e){case o.BillingCycle.TwoYears:return 24;case o.BillingCycle.OneYear:return 12;default:return 1}}function I(e){return(Math.round(100*e)/100).toFixed(2)}function b(e){const t=Math.round(100*e)/100;return Math.round(t).toFixed(0)}function y(e){return Math.floor(e).toString()}function O(e){const t=Math.round(100*e)/100,i=Math.round(t);return Math.abs(t-i)>0?t.toFixed(2):i.toFixed(0)}function L(e){return Number.isInteger(e)?e.toFixed(0):(Math.round(10*e)/10).toFixed(1)}function C(e){const t=Math.round(100*e)/100,i=Math.round(10*e)/10,r=Math.round(t);return Math.abs(t-r)>0?Math.abs(t-i)>0?t.toFixed(2):i.toFixed(1):r.toFixed(0)}function v(e){const t=(0,r.t)("{proPlanName} Trial");if(S(e)){const i=E(m(e));return t.format({proPlanName:i})}return E(e)}},198796:(e,t,i)=>{
function r(e,...t){return e&&"object"==typeof e?(0===t.length||t.forEach((t=>{null!=t&&"object"==typeof t&&Object.keys(t).forEach((i=>{const o=e[i],s=t[i];if(s===e)return;const a=Array.isArray(s);if(s&&(n(s)||a)){let t;t=a?o&&Array.isArray(o)?o:[]:o&&n(o)?o:{},e[i]=r(t,s)}else void 0!==s&&(e[i]=s)}))})),e):e}function n(e){if(!e||"[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);if(!t)return!0;const i=Object.hasOwnProperty.toString,r=t.hasOwnProperty("constructor")&&t.constructor;return"function"==typeof r&&i.call(r)===i.call(Object)}i.d(t,{deepExtend:()=>r})},977809:(e,t,i)=>{function r(e){return e.reduce((function(e,t,i){return~e.indexOf(t)||e.push(t),e}),[])}i.r(t),i.d(t,{uniq:()=>r})},461909:(e,t,i)=>{function r(e){if(void 0===e)return null;const t=e.match(/(delayed_streaming)_([\d]{1,4})/);return null===t?null:{mode:t[1],interval:parseInt(t[2])}}function n(e){const t=r(e.update_mode);return null===t||(e.update_mode=t.mode,e.update_mode_seconds=t.interval),e}i.r(t),i.d(t,{parseUpdateMode:()=>r,normalizeUpdateMode:()=>n})},560507:(e,t,i)=>{i.d(t,{enabled:()=>_,getConfig:()=>c})
;const r=JSON.parse('{"free":{"CHART_STORAGE":{"limit":1},"MULTIPLE_CHARTS":{"limit":1},"INDICATORS_ON_CHART":{"limit":3},"HISTORICAL_BARS":{"limit":5},"STUDY_ON_STUDY":{"limit":270,"child_limit":1},"SERVER_SIDE_ALERTS":{"limit":1},"SCREENER_ALERTS":{"limit":1},"SCREENER_INTERVALS":{"interval":["1D","1W","1M"]},"STUDY_TEMPLATES":{"limit":1},"SIMULTANEOUS_CONNECTIONS":{"limit":1},"IDEA_SOCIAL_LINKS":{"socials":["Twitter","Youtube"]},"MULTICOLOR_FLAGGED_SYMBOLS":{"limit":1}},"__legacy_pro":{"CHART_STORAGE":{"limit":99999},"MULTIPLE_CHARTS":{"limit":8},"CUSTOM_INTERVALS":{},"MULTIPLE_WATCHLISTS":{},"IMPORT_WATCHLISTS":{},"EXPORT_WATCHLISTS":{},"INDICATORS_ON_CHART":{"limit":99999},"HISTORICAL_BARS":{"limit":10},"TV_VOLUMEBYPRICE":{"study_packages":["tv-volumebyprice"]},"STUDY_ON_STUDY":{"limit":270,"child_limit":99999},"TICK_BY_TICK_PUSH_DATA":{},"SERVER_SIDE_ALERTS":{"limit":20},"SCREENER_ALERTS":{"limit":99999},"SCREENER_AUTO_REFRESH":{},"SCREENER_EXPORT_DATA":{},"SCREENER_INTERVALS":{"interval":["1m","5m","15m","30m","1h","2h","4h","1D","1W","1M"]},"NO_SPONSORED_ADS":{},"STUDY_TEMPLATES":{"limit":99999},"SIMULTANEOUS_CONNECTIONS":{"limit":1},"IDC_AVAILABLE_DELAY":{},"STATUS":{"disable_on_trial":true},"MULTIFLAGGED_SYMBOLS_LISTS":{},"BAR_REPLAY_INTRADAY":{},"SHOWS":{"disable_on_trial":true},"ALERTS_WEBHOOK":{},"DEEP_FUNDAMENTALS_HISTORY":{},"IDEA_SOCIAL_LINKS":{"socials":["Twitter","Youtube"]},"EXTENDED_SOCIAL_LINKS":{"socials":["Facebook","Instagram"],"disable_on_trial":true},"MULTI_MONITOR":{},"PUBLISH_PROTECTED_SCRIPTS":{"disable_on_trial":true}},"__legacy_pro_realtime":{"extends":"__legacy_pro","TV_PROSTUDIES":{"study_packages":["tv-prostudies"]},"SERVER_SIDE_ALERTS":{"limit":1000},"CAN_EDIT_PUBLIC_CHATS":{"disable_on_trial":true},"EXPORT_CHART_DATA":{},"CUSTOM_FORMULAS":{},"INTRADAY_EXOTIC_CHARTS":{},"BACKTESTING_EXPORT":{}},"__legacy_pro_premium":{"extends":"__legacy_pro_realtime","USE_BAR_MAGNIFIER":{},"HISTORICAL_BARS":{"limit":20},"IDEA_SIGNATURE":{"disable_on_trial":true},"PROFILE_WEBSITE_FIELD":{"disable_on_trial":true},"ALERTS_NO_EXPIRATION":{},"PUBLISH_INVITE_ONLY_SCRIPTS":{"disable_on_trial":true},"EXPORT_CHART_DATA":{},"DEEP_HISTORY_BACKTEST":{},"ALERTS_ON_SECONDS":{},"PERMANENT_STREAM_RECORDS":{},"EXTENDED_SOCIAL_LINKS":{"socials":["Facebook","Instagram","Website"],"disable_on_trial":true},"SECONDS_INTERVALS":{}},"pro":{"CHART_STORAGE":{"limit":5},"MULTIPLE_CHARTS":{"limit":2},"CUSTOM_INTERVALS":{},"MULTIPLE_WATCHLISTS":{},"IMPORT_WATCHLISTS":{},"EXPORT_WATCHLISTS":{},"INDICATORS_ON_CHART":{"limit":5},"HISTORICAL_BARS":{"limit":10},"TV_VOLUMEBYPRICE":{"study_packages":["tv-volumebyprice"]},"STUDY_ON_STUDY":{"limit":270,"child_limit":1},"TICK_BY_TICK_PUSH_DATA":{},"SERVER_SIDE_ALERTS":{"limit":20},"SCREENER_ALERTS":{"limit":99999},"SCREENER_AUTO_REFRESH":{},"SCREENER_EXPORT_DATA":{},"SCREENER_INTERVALS":{"interval":["1m","5m","15m","30m","1h","2h","4h","1D","1W","1M"]},"NO_SPONSORED_ADS":{},"STUDY_TEMPLATES":{"limit":99999},"SIMULTANEOUS_CONNECTIONS":{"limit":1},"IDC_AVAILABLE_DELAY":{},"STATUS":{"disable_on_trial":true},"BAR_REPLAY_INTRADAY":{},"MULTIFLAGGED_SYMBOLS_LISTS":{},"SHOWS":{"disable_on_trial":true},"ALERTS_WEBHOOK":{},"DEEP_FUNDAMENTALS_HISTORY":{},"PUBLISH_PROTECTED_SCRIPTS":{"disable_on_trial":true},"IDEA_SOCIAL_LINKS":{"socials":["Twitter","Youtube"]},"EXTENDED_SOCIAL_LINKS":{"socials":["Facebook","Instagram"],"disable_on_trial":true},"MULTI_MONITOR":{},"MULTICOLOR_FLAGGED_SYMBOLS":{"limit":7},"INTRADAY_EXCHANGE":{},"VOLUME_PROFILE":{}},"pro_realtime":{"extends":"pro","CHART_STORAGE":{"limit":10},"MULTIPLE_CHARTS":{"limit":4},"INDICATORS_ON_CHART":{"limit":10},"TV_PROSTUDIES":{"study_packages":["tv-prostudies"]},"STUDY_ON_STUDY":{"limit":270,"child_limit":9},"SERVER_SIDE_ALERTS":{"limit":100},"CAN_EDIT_PUBLIC_CHATS":{"disable_on_trial":true},"SIMULTANEOUS_CONNECTIONS":{"limit":2},"EXPORT_CHART_DATA":{},"CUSTOM_FORMULAS":{},"INTRADAY_EXOTIC_CHARTS":{},"KAGI_RENKO":{},"INTRADAY_SPREAD":{},"CUSTOM_CHATS":{},"BACKTESTING_EXPORT":{}},"pro_premium":{"extends":"pro_realtime","USE_BAR_MAGNIFIER":{},"CHART_STORAGE":{"limit":99999},"MULTIPLE_CHARTS":{"limit":8},"INDICATORS_ON_CHART":{"limit":25},"HISTORICAL_BARS":{"limit":20},"STUDY_ON_STUDY":{"limit":270,"child_limit":24},"SERVER_SIDE_ALERTS":{"limit":400},"SIMULTANEOUS_CONNECTIONS":{"limit":5},"IDEA_SIGNATURE":{"disable_on_trial":true},"PROFILE_WEBSITE_FIELD":{"disable_on_trial":true},"ALERTS_NO_EXPIRATION":{},"PUBLISH_INVITE_ONLY_SCRIPTS":{"disable_on_trial":true},"EXPORT_CHART_DATA":{},"DEEP_HISTORY_BACKTEST":{},"ALERTS_ON_SECONDS":{},"PERMANENT_STREAM_RECORDS":{},"EXTENDED_SOCIAL_LINKS":{"socials":["Facebook","Instagram","Website"],"disable_on_trial":true},"SECONDS_INTERVALS":{}},"pro_mini_alerts":{"extends":"free","SERVER_SIDE_ALERTS":{"limit":30},"SCREENER_ALERTS":{"limit":99999},"SHOWS":{"disable_on_trial":true},"IDC_AVAILABLE_DELAY":{},"DEEP_FUNDAMENTALS_HISTORY":{}},"pro_mini_ads":{"extends":"free","NO_SPONSORED_ADS":{},"SHOWS":{"disable_on_trial":true},"IDC_AVAILABLE_DELAY":{},"DEEP_FUNDAMENTALS_HISTORY":{}},"pro_mini_layouts":{"extends":"free","MULTIPLE_CHARTS":{"limit":8},"SHOWS":{"disable_on_trial":true},"IDC_AVAILABLE_DELAY":{},"DEEP_FUNDAMENTALS_HISTORY":{}},"pro_edu":{"extends":"free","CHART_STORAGE":{"limit":3},"MULTIPLE_CHARTS":{"limit":2},"MULTIPLE_WATCHLISTS":{},"IMPORT_WATCHLISTS":{},"EXPORT_WATCHLISTS":{},"TICK_BY_TICK_PUSH_DATA":{},"SERVER_SIDE_ALERTS":{"limit":5},"SCREENER_ALERTS":{"limit":99999},"SHOWS":{"disable_on_trial":true},"IDC_AVAILABLE_DELAY":{},"DEEP_FUNDAMENTALS_HISTORY":{}}}'),n=JSON.parse('{"cme":{"INDICATORS_ON_CHART":{"limit":99999}},"bovespa":{"INDICATORS_ON_CHART":{"limit":99999}},"qecomqa":{"INDICATORS_ON_CHART":{"limit":99999}}}')
;var o=i(833813),s=i(809965),a=i(234405);function _(e,t,i){let r=window.user;i&&(r=i);const n=c(e,t,r);return!!n&&!(n[o.ProductFeatures.DISABLE_ON_TRIAL]&&(!r||r.is_trial))}function l(e){const t=r[e];return t?t.extends?Object.assign({},l(t.extends),t):t:null}function c(e,t,i){var r;let o=l(t||function(e){let t=window.user;e&&(t=e);let i=(null==t?void 0:t.pro_plan)||s.ProPlans.Free;const r=i!==s.ProPlans.Free&&!(0,a.isTrialProduct)(i);return r||(i=(0,a.getProductForTrial)(i)),r&&t&&!t.is_pro_limited&&!t.new_pro_product_line&&(i=`__legacy_${i}`),i}(i));if(!o)return null;const _=null===(r=window.TradingView)||void 0===r?void 0:r.widgetCustomer;return _&&n[_]&&(o=Object.assign({},o,n[_])),o&&o[e]||null}},833813:(e,t,i)=>{var r;i.d(t,{ProductFeatures:()=>r,UNLIMITED_FEATURE_LIMIT:()=>n}),function(e){e.DISABLE_ON_TRIAL="disable_on_trial",e.CUSTOM_INTERVALS="CUSTOM_INTERVALS",e.CHART_STORAGE="CHART_STORAGE",e.MULTIPLE_CHARTS="MULTIPLE_CHARTS",e.MULTIPLE_WATCHLISTS="MULTIPLE_WATCHLISTS",e.IMPORT_WATCHLISTS="IMPORT_WATCHLISTS",e.EXPORT_WATCHLISTS="EXPORT_WATCHLISTS",e.INDICATORS_ON_CHART="INDICATORS_ON_CHART",e.STUDY_ON_STUDY="STUDY_ON_STUDY",e.TICK_BY_TICK_PUSH_DATA="TICK_BY_TICK_PUSH_DATA",e.SERVER_SIDE_ALERTS="SERVER_SIDE_ALERTS",e.PUBLISH_INVITE_ONLY_SCRIPTS="PUBLISH_INVITE_ONLY_SCRIPTS",e.PUBLISH_PROTECTED_SCRIPTS="PUBLISH_PROTECTED_SCRIPTS",e.SCREENER_ALERTS="SCREENER_ALERTS",e.SCREENER_AUTO_REFRESH="SCREENER_AUTO_REFRESH",e.SCREENER_EXPORT_DATA="SCREENER_EXPORT_DATA",e.SCREENER_INTERVALS="SCREENER_INTERVALS",e.SIMULTANEOUS_CONNECTIONS="SIMULTANEOUS_CONNECTIONS",e.STUDY_TEMPLATES="STUDY_TEMPLATES",e.CAN_EDIT_PUBLIC_CHATS="CAN_EDIT_PUBLIC_CHATS",e.NO_SPONSORED_ADS="NO_SPONSORED_ADS",e.IDC_AVAILABLE_DELAY="IDC_AVAILABLE_DELAY",e.STATUS="STATUS",e.ALERTS_NO_EXPIRATION="ALERTS_NO_EXPIRATION",e.MULTIFLAGGED_SYMBOLS_LISTS="MULTIFLAGGED_SYMBOLS_LISTS",e.BAR_REPLAY_INTRADAY="BAR_REPLAY_INTRADAY",e.TV_VOLUMEBYPRICE="TV_VOLUMEBYPRICE",e.ALERTS_WEBHOOK="ALERTS_WEBHOOK",e.DEEP_FUNDAMENTALS_HISTORY="DEEP_FUNDAMENTALS_HISTORY",e.EXPORT_CHART_DATA="EXPORT_CHART_DATA",e.ALERTS_ON_SECONDS="ALERTS_ON_SECONDS",e.PERMANENT_STREAM_RECORDS="PERMANENT_STREAM_RECORDS",e.IDEA_SOCIAL_LINKS="IDEA_SOCIAL_LINKS",e.EXTENDED_SOCIAL_LINKS="EXTENDED_SOCIAL_LINKS",e.DEEP_HISTORY_BACKTEST="DEEP_HISTORY_BACKTEST",e.BACKTESTING_EXPORT="BACKTESTING_EXPORT",e.USE_BAR_MAGNIFIER="USE_BAR_MAGNIFIER",e.HISTORICAL_BARS="HISTORICAL_BARS",e.KAGI_RENKO="KAGI_RENKO",e.INTRADAY_SPREAD="INTRADAY_SPREAD",e.SECONDS_INTERVALS="SECONDS_INTERVALS",e.MULTICOLOR_FLAGGED_SYMBOLS="MULTICOLOR_FLAGGED_SYMBOLS",e.INTRADAY_EXCHANGE="INTRADAY_EXCHANGE",e.CUSTOM_CHATS="CUSTOM_CHATS",e.VOLUME_PROFILE="VOLUME_PROFILE",e.PRIMITIVE_ALERTS="PRIMITIVE_ALERTS",e.COMPLEX_ALERTS="COMPLEX_ALERTS"}(r||(r={}));const n=99999},125226:(e,t,i)=>{var r=i(49437).TVLocalStorage,n=i(97639),o=i(855385);i(638456);var s=new n;TradingView.FeatureToggle={force_prefix:"forcefeaturetoggle.",onChanged:new n,enableFeature:function(e){r.setItem(this.force_prefix+e,"true"),s.fire(e)},disableFeature:function(e){
r.setItem(this.force_prefix+e,"false"),s.fire(e)},resetFeature:function(e){r.removeItem(this.force_prefix+e),s.fire(e)},onFeaturesStateChanged:function(){return s}},TradingView.isFeatureEnabled=function(e){var t="featuretoggle_seed";function n(e){try{var i=o(e+function(){if(window.user&&window.user.id)return window.user.id;var e=r.getItem(t);return null!==e||(e=Math.floor(1e6*Math.random()),r.setItem(t,e)),e}());return new DataView(i).getUint32(0,!0)/4294967296}catch(e){return.5}}function a(t){return!("local"!==window.environment||!function(e){
var t=["broker_FXCM_token_v2","broker_TRADESTATION_V3","broker_TRADOVATE_dev","black_friday_mainpage","black_friday_popup","datawindow","trading-fast-renew-oauth-token","switching_trial_year_to_month_disabled","switching_year_to_month_disabled","default_year_billing_cycle_switcher","marketing-analytics","google-ads","visible_address_fields_by_default","slow-support-warning","hide-trading-floating-toolbar","tvcoins_donations","save-short-streams","details_disable_bid_ask","vat_disabled","pro_plan_upgrades_disabled","pro_plan_downgrades_disabled","disable_recaptcha_on_signup","braintree-trial-implementation","braintree-gopro-in-order-dialog","braintree-apple-pay","braintree-google-pay","braintree-apple-pay-trial","braintree-google-pay-trial","braintree-venmo","braintree-venmo-trial","braintree-3ds-enabled","braintree-3ds-allow-liability-shifted-transactions-only","hide_gopro_popup_upgrade_button","tradestation_use_sync_mapper","yandex_metric_enabled","broker_id_session","remove_line_tools_from_content","disable_retry_load_linetools_from_storage","modular_broker_use_sync_mapper","do_not_save_shared_line_tools_to_charts","save_shared_line_tools","chart_storage_with_broker_name","do_not_invalidate_chart_on_changing_line_tools","oanda-european-accounts-warning","mobile_show_bottom_panel","disable_save_settings","desktop_version_notification_enabled","favorites-in-broker-dropdown","streams_stats_profile","hide_ecomonic_events","aggregating_page_pings","mobile_trading_web","mobile_trading_ios","mobile_trading_android","hide_real_brokers_on_mobile","disable_tradestation_country_block","enable_trading_server_logger","hide_ranges_label_colors","disable_user_specific_encryption","enable_deep_history_backtesting","enable_deep_history_backtesting_list_of_trades","show_checkbox_of_house_rules_to_idea_and_script","minds_widget_enabled","enable_partner_program","disable_phone_verification_sms","disable_sms_for_particular_countries","no_overlap_mode_enabled","collapse_pane_buttons_when_connected_to_broker","enable_new_execution_style","pushstream_connections_observer","enable_new_replay_ui","use_staging_verifier","ibkr_use_new_init_session_api","test_minds_connections","enable_eventsource_pushstream_transport","ftx_request_server_logger","ibkr_request_server_logger","check_ibkr_side_maintenance","tradestation_request_server_logger","trading_request_server_logger","ecommpay_ru","hide_ideas_on_chart","RU_SF_disable","RU_VOR_disable","enable_monaco_editor","show_continuous_contract_switches","enable_new_custom_public_chats","bottom_panel_track_events","vertex-tax-included","enable_place_order_context_in_instant_mode","nyse_agreement","sync_daterange_with_right_margin","websocket_send_locale","enable_edit_order_context_in_instant_mode","show_data_problems_in_help_center","use_description_for_economic_symbols"],i="[A-Z]+[a-zA-Z0-9_]+",r=new RegExp(`broker_${i}_dev`,"g"),n=new RegExp(`hide_${i}_on_ios`,"g"),o=new RegExp(`hide_${i}_on_android`,"g"),s=new RegExp(`hide_${i}_on_mobile_web`,"g")
;return-1===t.indexOf(e)&&-1===e.indexOf("-maintenance")&&!1===r.test(e)&&!1===n.test(e)&&!1===o.test(e)&&!1===s.test(e)}(t))||(!e[t]||-1!==e[t])&&(!!("true"===r.getItem(TradingView.FeatureToggle.force_prefix+t)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"true"===user.settings[TradingView.FeatureToggle.force_prefix+t])||!("false"===r.getItem(TradingView.FeatureToggle.force_prefix+t)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"false"===user.settings[TradingView.FeatureToggle.force_prefix+t])&&(!!e[t]&&(1===e[t]||n(t)<=e[t])))}return TradingView.onWidget()||Promise.all([i.e(20583),i.e(34604)]).then(i.bind(i,920583)).then((t=>{t.pushStreamMultiplexer.on("featuretoggle",(function(t){var i=a(t.name);e[t.name]=t.state,i!==a(t.name)&&s.fire(t.name)}))})),a}(window.featureToggleState||{}),t.FeatureToggle=TradingView.FeatureToggle,t.isFeatureEnabled=TradingView.isFeatureEnabled,t.onFeaturesStateChanged=TradingView.FeatureToggle.onFeaturesStateChanged.bind(TradingView.FeatureToggle)},175203:(e,t,i)=>{i.d(t,{telemetry:()=>u});var r=i(97639),n=i.n(r),o=i(86674),s=i(638456),a=i(314802);i(659863);const _=(0,i(911905).getLogger)("Common.Telemetry"),l={default:15e3,site:3e5},c=["before_websocket_connection_time_frame","websocket_connection_time_frame","first_series_full_time_frame","page_full_load_time_frame","page_load_time_frame"];const u=new class{constructor(){this.reportSent=new(n()),this.timeCounters={series:{marks:[]},study:{},pine:{}},this._timeoutIds={},this._commonAdditionalData={cluster:null,userId:"0"},this._reportStash={}}setSessionInfo(e){const t=this._parseCluster(e);null!==t&&(this._commonAdditionalData.cluster=t)}sendReport(e,t,i){var r;if(!this._isAbleToSendReport(t))return;const n=this._getSubserviceType(e),o=this._getHost(e,n);if(null!==o){if(i=void 0===i?{count:1}:i,this._addReportToStash(i,t,o),!this._timeoutIds[e]){const t=null!==(r=l[e])&&void 0!==r?r:l.default;this._timeoutIds[e]=setTimeout(this._sendTelemetryToService.bind(this,e,o),t)}}else _.logError(`Unable to get host for counter: ${t}, metric type: ${e}, serivce type: ${n}`)}sendChartReport(e,t,i=!0){this._sendServiceSpecifiedReport("charts",e,t,i)}sendLineToolsStorageReport(e,t,i=!0){this._sendServiceSpecifiedReport("line_tools_storage",e,t,i)}_sendServiceSpecifiedReport(e,t,i,r=!0){this._updateUserInfo(),i=void 0===i?{count:1}:i,r&&(i=this._appendCommonAdditionalInfo(i,["cluster","userId"])),this.sendReport(e,t,i)}_updateUserInfo(){const e="user"in window&&"id"in window.user?window.user.id:"0";this._commonAdditionalData.userId=String(e)}_isAbleToSendReport(e){const t=window.TELEMETRY_HOSTS,i=c.includes(e),r=Boolean(window.TradingView.onChartPage||(0,s.onWidget)());return t&&(!i||r)}_sendTelemetryToService(e,t){if(this._reportStash.hasOwnProperty(t)){const e=this._cropParams(this._reportStash[t]),i=this._renameAllParams(e),r={event:"report_stash",params:this._cleanAllParams(i)};_.logDebug(`Report to host: ${t}; stash: ${JSON.stringify(this._reportStash[t])}`),this.reportSent.fire(this._reportStash[t]),
delete this._reportStash[t],(0,o.fetch)(`${t}/report`,{method:"POST",body:JSON.stringify(r)})}this._timeoutIds[e]=null}_getHost(e,t){const i=window.TELEMETRY_HOSTS,r=i[e]&&i[e][t];return Boolean(r)?r:null}_getSubserviceType(e){if(!["charts","site"].includes(e))return"all";let t="free";const i=window.user.is_pro;return"charts"===e&&(0,a.isOnMobileAppPage)("old")?t=i?"ios_pro":"ios_free":"charts"===e&&(0,a.isOnMobileAppPage)("new")?t=i?"android_pro":"android_free":(0,s.onWidget)()?t="widget":i&&(t="pro"),t}_parseCluster(e){let t;try{t=JSON.parse(e).session_id}catch(e){return _.logError("Could not parse cluster id (session id)"),null}const i=/(.*@)(.*)/gi.exec(t);return null!==i&&i.length>=3?i[2]:null}_appendCommonAdditionalInfo(e,t){return t.forEach((t=>{t in this._commonAdditionalData&&(e.additional=e.additional||{},e.additional[t]=this._commonAdditionalData[t])})),e}_cropParams(e){var t;for(const i in e)e.hasOwnProperty(i)&&e[i].length>1e3&&(e.too_much_metrics_frame=null!==(t=e.too_much_metrics_frame)&&void 0!==t?t:[],e.too_much_metrics_frame.push({value:e[i].length,additional:{event:i}}),delete e[i]);return e}_renameAllParams(e){const t={};for(const i in e)e.hasOwnProperty(i)&&(t[i]=[],e[i].forEach((e=>{t[i].push(this._renameEntryParams(e))})));return t}_renameEntryParams(e){const t={count:"c",value:"v",text:"t",additional:"a"};return Object.keys(e).reduce(((i,r)=>(i[t[r]]=e[r],i)),{})}_cleanAllParams(e){const t={};for(const i in e)if(e.hasOwnProperty(i)){t[i]=[];const r={c:0};e[i].forEach((e=>{const n=this._cleanEntryParams(e),o=Object.keys(n).length;1===o&&void 0!==n.c?r.c+=n.c:o>0&&t[i].push(n)})),r.c>0&&t[i].push(r),0===t[i].length&&delete t[i]}return t}_cleanEntryParams(e){const t=Object.keys(e).reduce(((t,i)=>"c"!==i&&"t"!==i||e[i]?(t[i]=e[i],t):t),{});return"c"in t||"v"in t||"t"in t?t:{}}_addReportToStash(e,t,i){i in this._reportStash||(this._reportStash[i]={}),t in this._reportStash[i]||(this._reportStash[i][t]=[]),Object.keys(e).length>0&&this._reportStash[i][t].push(e)}}},779923:(e,t,i)=>{async function r(e,t){const r=await Promise.all([i.e(90519),i.e(90926),i.e(10146),i.e(8834),i.e(30063),i.e(5979),i.e(48181),i.e(35354),i.e(95468),i.e(91670),i.e(55508),i.e(36344),i.e(87995),i.e(27582),i.e(38890)]).then(i.bind(i,918728));return r.showSimpleDialog(e,r.renameModule,t)}async function n(e,t){const r=await Promise.all([i.e(90519),i.e(90926),i.e(10146),i.e(8834),i.e(30063),i.e(5979),i.e(48181),i.e(35354),i.e(95468),i.e(91670),i.e(55508),i.e(36344),i.e(87995),i.e(27582),i.e(38890)]).then(i.bind(i,918728));return r.showSimpleDialog(e,r.confirmModule,t)}async function o(e,t){const r=await Promise.all([i.e(90519),i.e(90926),i.e(10146),i.e(8834),i.e(30063),i.e(5979),i.e(48181),i.e(35354),i.e(95468),i.e(91670),i.e(55508),i.e(36344),i.e(87995),i.e(27582),i.e(38890)]).then(i.bind(i,918728));return r.showSimpleDialog(e,r.warningModule,t)}i.r(t),i.d(t,{showRename:()=>r,showConfirm:()=>n,showWarning:()=>o})}}]);